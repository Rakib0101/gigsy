customElements.get("localization-form")||customElements.define("localization-form",class extends HTMLElement{constructor(){super(),this.elements={parentClass:this.parentElement.className,input:this.querySelector('input[name="locale_code"], input[name="country_code"]'),button:this.querySelector("button"),panel:this.querySelector(".localization-list"),inputSearch:this.querySelector("#localization-search-input"),closeButton:this.querySelector(".modal__close-button")},this.elements.button.addEventListener("click",this.openSelector.bind(this)),this.onBodyClick=this.handleBodyClick.bind(this),this.elements.closeButton.addEventListener("click",this.hidePanel.bind(this)),this.addEventListener("keyup",this.onContainerKeyUp.bind(this)),this.elements.inputSearch&&this.elements.inputSearch.addEventListener("keyup",this.filter.bind(this)),this.querySelectorAll("a").forEach(item=>item.addEventListener("click",this.onItemClick.bind(this)))}filter(event){const valThis=event.target.value;this.elements.panel.querySelectorAll(".disclosure__item").forEach(item=>{item.querySelector(".localization-form__country-name").textContent.toLowerCase().indexOf(valThis.toLowerCase())>-1?item.classList.remove("hide"):item.classList.add("hide")});const activeItems=this.elements.panel.querySelectorAll(".disclosure__item:not(.hide)"),noResultsMessage=this.elements.panel.querySelector(".disclosure__no-results");activeItems.length?noResultsMessage.classList.contains("hide")||noResultsMessage.classList.add("hide"):noResultsMessage.classList.remove("hide")}hidePanel(){this.classList.remove("localization-screen-visible"),this.elements.button.setAttribute("aria-expanded","false"),this.elements.button.classList.remove("disclosure__button--open"),this.elements.panel.setAttribute("hidden",!0),this.elements.parentClass==="desktop-localization-wrapper"?document.body.classList.remove("overflow-hidden"):document.body.classList.remove("overflow-hidden-mobile"),document.body.removeEventListener("click",this.onBodyClick)}onContainerKeyUp(event){event.code.toUpperCase()==="ESCAPE"&&(this.hidePanel(),this.elements.button.focus())}onItemClick(event){event.preventDefault();const form=this.querySelector("form");this.elements.input.value=event.currentTarget.dataset.value,form&&form.submit()}openSelector(){this.classList.toggle("localization-screen-visible"),this.elements.button.focus(),this.elements.panel.toggleAttribute("hidden"),this.elements.button.setAttribute("aria-expanded",(this.elements.button.getAttribute("aria-expanded")==="false").toString()),this.elements.button.classList.toggle("disclosure__button--open"),this.elements.parentClass==="desktop-localization-wrapper"?document.body.classList.add("overflow-hidden"):document.body.classList.add("overflow-hidden-mobile"),document.body.addEventListener("click",this.onBodyClick)}handleBodyClick(evt){const target=evt.target,closestForm=target.closest("localization-form");target!==this&&!target.closest("localization-form")?this.hidePanel():closestForm!==this&&this.hidePanel()}});
//# sourceMappingURL=/cdn/shop/t/33/assets/localization-form.js.map?v=57315375992880009331749835973
