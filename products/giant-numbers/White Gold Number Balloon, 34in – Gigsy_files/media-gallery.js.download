(!customElements.get("media-gallery")||!customElements.get("media-gallery-lite"))&&function($){var $=jQuery=$;class MediaGallery extends HTMLElement{constructor(){super(),this.productGallery=this.querySelector(`.product-single__gallery-${this.dataset.section}`),this.thumbnailsWrapper=this.querySelector(".thumbnails-wrapper"),this.productThumbnails=this.thumbnailsWrapper?this.thumbnailsWrapper.querySelector(".product-single__thumbnails"):{};const productVariants=document.getElementById(`VariantSelect-${this.dataset.section}`);let options,currentVariant,mediaId=null;productVariants&&(options=productVariants.productData?productVariants.productData.options:null,currentVariant=productVariants.currentVariant,currentVariant&&currentVariant.featured_media&&(mediaId=`${this.dataset.section}-${currentVariant.featured_media.id}`)),this.initBreakpoints(),this.initGallerySlider(),this.initThumbnails(),this.setActiveMedia(mediaId,options,currentVariant)}initBreakpoints(){enquire.register("screen and (min-width: 1280px)",{match:()=>{this.bpSmall=!1},unmatch:()=>{this.bpSmall=!0}}),enquire.register("screen and (min-width: 1001px)",{match:()=>{this.blockSlide3DModel=!0}})}autoFitIsSupported(){const{userAgent}=window.navigator;return!userAgent.includes("Firefox/")}initGallerySlider(){const self=this,$productGallery=$(`.product-single__gallery-${this.dataset.section}`),galleryInitialized=$productGallery.hasClass("slick-initialized"),optionsGallery={arrows:!0};galleryInitialized||($productGallery.on("init",function(event,slick){self.blockSlide3DModel===!0&&$productGallery.find(".slick-current .product-media-modal__model").length&&slick.slickSetOption("swipe",!1)}),$productGallery.slick(optionsGallery),$productGallery.on("beforeChange",function(event,slick,currentSlide,nextSlide){self.setActiveThumbnail(null,nextSlide)}),$productGallery.on("afterChange",function(event,slick,currentSlide){const activeMedia=$productGallery.find(".slick-current");activeMedia.length&&self.playActiveMedia(activeMedia[0]),self.blockSlide3DModel===!0&&($productGallery.find(".slick-current .product-media-modal__model").length?slick.slickSetOption("swipe",!1):slick.slickGetOption("swipe")===!1&&slick.slickSetOption("swipe",!0))}),window.addEventListener("keydown",event=>{event.code==="ArrowLeft"?$productGallery.slick("slickPrev"):event.code==="ArrowRight"&&$productGallery.slick("slickNext")}),$(".product-single__wrapper").find(".slick-list").removeAttr("aria-live"),$(".product-single__wrapper").find(".slick-disabled").removeAttr("aria-disabled"))}initThumbnails(){const thumbImages=this.querySelectorAll(`.product-single__thumbnail--${this.dataset.section}`);thumbImages.length&&thumbImages.forEach(thumbImage=>{const self=this;thumbImage.addEventListener("click",function(e){e.preventDefault();const mediaId=this.dataset.thumbnailId;self.setActiveThumbnail(mediaId)})})}setActiveThumbnail(mediaId=null,nextSlide=null){let $activeThumbnail,slideIndex=0;const $thumbnailWrappers=$(".product-single__thumbnails-item"),$thumbnailActiveWrappers=$(".product-single__thumbnails-item:not(.product-single__thumbnails--hide)"),$slickGallery=$(`.product-single__gallery-${this.dataset.section}`),$thumbImages=$(`.product-single__thumbnail--${this.dataset.section}`);if(mediaId)$activeThumbnail=$thumbnailWrappers.find(`.product-single__thumbnail--${this.dataset.section}[data-thumbnail-id='${mediaId}']`);else{let activeSlide=$slickGallery.slick("slickCurrentSlide");nextSlide!=null&&(activeSlide=nextSlide),$activeThumbnail=$($thumbnailActiveWrappers[activeSlide]).find(".product-single__thumbnail"),mediaId=$activeThumbnail.data("thumbnail-id")}$thumbImages.removeClass("active-thumb").removeAttr("aria-current"),$activeThumbnail.addClass("active-thumb"),$activeThumbnail.attr("aria-current",!0),$thumbnailActiveWrappers.each(function(index,element){$(element).find(".product-single__thumbnail").data("thumbnail-id")===mediaId&&(slideIndex=index)}),$slickGallery.slick("slickGoTo",slideIndex,!0)}camelize(str){return str.replace(/\W+(.)/g,function(match,chr){return chr.toUpperCase()})}setActiveMedia(mediaId,productOptions,currentVariant){const enableAllImages=this.dataset.enableAllImages,$slickGallery=$(`.product-single__gallery-${this.dataset.section}`),$thumbnailWrappers=$(".product-single__thumbnails-item"),self=this;let slideIndex=0,colorValue,setThumbnail=!1;if(productOptions&&currentVariant){const productSwatchesArray=this.dataset.productSwatches.split(",");productOptions.forEach((option,i)=>{const optionName=option.toLowerCase().trim();productSwatchesArray.find(value=>value.trim()===optionName)&&(colorValue=currentVariant.options[i])})}if(colorValue&&enableAllImages==="false"){const colorValueCamelize=this.camelize(colorValue.toLowerCase());if($thumbnailWrappers.each((index,elem)=>{const $wrapper=$(elem),alt=$wrapper.find("img").data("alt"),altColor=alt.match(/\(([^)]+)\)/)?alt.match(/\(([^)]+)\)/)[1]:"",altColorCamelize=this.camelize(altColor.toLowerCase());for(;$thumbnailWrappers.length===1;)$wrapper=$wrapper.parent();if(altColor===""){$wrapper.removeClass("product-single__thumbnails--hide");return}altColorCamelize===colorValueCamelize?$wrapper.removeClass("product-single__thumbnails--hide"):$wrapper.addClass("product-single__thumbnails--hide")}),$slickGallery.slick("slickUnfilter"),$slickGallery.slick("slickFilter",function(){const altImage=$(this).attr("data-alt"),altImageColor=altImage.match(/\(([^)]+)\)/)?altImage.match(/\(([^)]+)\)/)[1]:"",altImageColorCamelize=self.camelize(altImageColor.toLowerCase());return altImageColor===""?!0:altImageColorCamelize===colorValueCamelize}),$(".product-single__thumbnails--hide").length===0&&mediaId){const activeMedia2=this.productGallery.querySelector(`[data-media-id="${mediaId}"]`);slideIndex=parseInt(activeMedia2.dataset.slickIndex)}else mediaId&&(setThumbnail=!0,self.setActiveThumbnail(mediaId))}else if($thumbnailWrappers.each(function(index,elem){const $wrapper=$(elem);for(;$thumbnailWrappers.length===1;)$wrapper=$wrapper.parent();$wrapper.removeClass("product-single__thumbnails--hide")}),mediaId){const activeMedia2=this.productGallery.querySelector(`[data-media-id="${mediaId}"]`);slideIndex=parseInt(activeMedia2.dataset.slickIndex)}setThumbnail||$slickGallery.slick("slickGoTo",slideIndex,!0);const activeMedia=this.productGallery.querySelector(`[data-slick-index="${$slickGallery.slick("slickCurrentSlide")}"]`);this.playActiveMedia(activeMedia)}playActiveMedia(activeItem){if(window.pauseAllMedia(this),activeItem){const video=activeItem.querySelector("video");video&&video.getAttribute("autoplay")&&video.play();const deferredMedia=activeItem.querySelector(".deferred-media:not(product-model)");if(deferredMedia&&deferredMedia.dataset.preventAutoplay)return;deferredMedia&&deferredMedia.loadContent&&deferredMedia.loadContent(!1)}}}customElements.define("media-gallery",MediaGallery);class MediaGalleryLite extends MediaGallery{constructor(){super()}initGallerySlider(){const self=this,sectionId=this.dataset.section,$productGallery=$(`.product-single__gallery-${sectionId}`),$galleryNav=$(`.product-single__thumbnails-${sectionId}`),optionsGallery={slidesToShow:1,slidesToScroll:1,arrows:!1,fade:!0,asNavFor:`.product-single__thumbnails-${sectionId}`},optionsNav={slidesToShow:3,slidesToScroll:1,asNavFor:`.product-single__gallery-${sectionId}`,centerMode:!0,centerPadding:"0px",focusOnSelect:!0,vertical:!0,arrows:!0,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:1,arrows:!0,vertical:!1}}]};$productGallery.on("init",function(event,slick){self.blockSlide3DModel===!0&&$productGallery.find(".slick-current .product-media-modal__model").length&&slick.slickSetOption("swipe",!1)}),$productGallery.slick(optionsGallery),$galleryNav.slick(optionsNav),$productGallery.on("beforeChange",function(event,slick,currentSlide,nextSlide){self.setActiveThumbnail(null,nextSlide)}),$productGallery.on("afterChange",function(event,slick,currentSlide){const activeMedia=$productGallery.find(".slick-current");activeMedia.length&&self.playActiveMedia(activeMedia[0]),self.blockSlide3DModel===!0&&($productGallery.find(".slick-current .product-media-modal__model").length?slick.slickSetOption("swipe",!1):slick.slickGetOption("swipe")===!1&&slick.slickSetOption("swipe",!0))}),window.addEventListener("keydown",event=>{event.code==="ArrowLeft"?$productGallery.slick("slickPrev"):event.code==="ArrowRight"&&$productGallery.slick("slickNext")}),$(".product-single__wrapper").find(".slick-list").removeAttr("aria-live"),$(".product-single__wrapper").find(".slick-disabled").removeAttr("aria-disabled")}}customElements.define("media-gallery-lite",MediaGalleryLite)}(theme.jQuery);
//# sourceMappingURL=/cdn/shop/t/33/assets/media-gallery.js.map?v=139418628750628586341749835974
