"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,_toPropertyKey(i.key),i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var n,i=_getPrototypeOf(t);if(e){var r=_getPrototypeOf(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _wrapNativeSuper(t){var e="function"==typeof Map?new Map:void 0;return _wrapNativeSuper=function(t){function n(){return _construct(t,arguments,_getPrototypeOf(this).constructor)}if(null===t||!_isNativeFunction(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(n,t)},_wrapNativeSuper(t)}function _construct(t,e,n){return _construct=_isNativeReflectConstruct()?Reflect.construct.bind():function(t,e,n){var i=[null];i.push.apply(i,e);var r=Function.bind.apply(t,i),o=new r;return n&&_setPrototypeOf(o,n.prototype),o},_construct.apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function _isNativeFunction(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}function _setPrototypeOf(t,e){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_setPrototypeOf(t,e)}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}var InfiniteSlider=function(t){function e(){var t;return _classCallCheck(this,e),t=n.call(this),t.handleResize=t.handleResize.bind(_assertThisInitialized(t)),t}_inherits(e,t);var n=_createSuper(e);return _createClass(e,[{key:"getResponsiveSlideCount",value:function(){var t=this.offsetWidth||window.innerWidth;return 1==this.slidesPerView?1:2==this.slidesPerView?t<500?1:2:t<500?1:t<790?2:t<1022?3:4}},{key:"handleResize",value:function(){var t,e=this.getResponsiveSlideCount();e!==this.visibleSlides&&(this.visibleSlides=e,this.updateSlideWidths());var n=(null===(t=this.track.children[0])||void 0===t?void 0:t.offsetWidth)+this.slideGap,i=this.currentIndex*n;this.track.style.transition="none",this.track.style.transform="translateX(".concat(-i,"px)"),this.loop||(this.goToIndex(0),this.visibleSlides>=this.numOfReviews?(document.getElementsByClassName("grp-slider-next")[0].style.display="none",document.getElementsByClassName("grp-slider-prev")[0].style.display="none"):(document.getElementsByClassName("grp-slider-next")[0].style.display="block",document.getElementsByClassName("grp-slider-prev")[0].style.display="block"))}},{key:"updateSlideWidths",value:function(){var t="calc((100% - ".concat(this.slideGap*(this.visibleSlides-1),"px) / ").concat(this.visibleSlides,")");Array.from(this.track.children).forEach(function(e){e.style.flex="0 0 ".concat(t)})}},{key:"attachExternalArrowListeners",value:function(){var t=this,e=this.getRootNode(),n=e.querySelectorAll(".".concat(this.prevClass)),i=e.querySelectorAll(".".concat(this.nextClass));n.forEach(function(e){return e.addEventListener("click",function(){return t.goToIndex(t.currentIndex-1)})}),i.forEach(function(e){return e.addEventListener("click",function(){return t.goToIndex(t.currentIndex+1)})})}},{key:"addDragEvents",value:function(){var t=this.trackContainer;t.addEventListener("mousedown",this.onDragStart.bind(this)),t.addEventListener("mousemove",this.onDragMove.bind(this)),t.addEventListener("mouseup",this.onDragEnd.bind(this)),t.addEventListener("mouseleave",this.onDragEnd.bind(this)),t.addEventListener("touchstart",this.onDragStart.bind(this),{passive:!0}),t.addEventListener("touchmove",this.onDragMove.bind(this),{passive:!0}),t.addEventListener("touchend",this.onDragEnd.bind(this))}},{key:"onDragStart",value:function(t){this.isDragging=!0,this.track.style.transition="none",this.startX=t.touches?t.touches[0].clientX:t.clientX;var e=this.track.children[0].offsetWidth+this.slideGap;this.prevTranslate=-this.currentIndex*e}},{key:"onDragMove",value:function(t){if(this.isDragging){var e=t.touches?t.touches[0].clientX:t.clientX,n=e-this.startX,i=this.prevTranslate+n;this.track.style.transform="translateX(".concat(i,"px)")}}},{key:"onDragEnd",value:function(){if(this.isDragging){this.isDragging=!1;var t=this.track.children[0].offsetWidth+this.slideGap,e=getComputedStyle(this.track).transform,n=parseFloat(e.split(",")[4])||0,i=Math.round(-n/t);this.goToIndex(i)}}},{key:"goToIndex",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.transitioning){this.transitioning=!0;var i=this.track.children[0].offsetWidth+this.slideGap;this.loop||(t=Math.max(0,Math.min(t,this.totalSlides-this.visibleSlides))),this.currentIndex=t,this.updatePagination(),this.track.style.transition=n?"none":"transform 0.4s ease",this.track.style.transform="translateX(".concat(-this.currentIndex*i,"px)"),setTimeout(function(){e.loop&&(e.currentIndex<e.totalSlides?(e.currentIndex+=e.totalSlides,e.track.style.transition="none",e.track.style.transform="translateX(".concat(-e.currentIndex*i,"px)")):e.currentIndex>=2*e.totalSlides&&(e.currentIndex-=e.totalSlides,e.track.style.transition="none",e.track.style.transform="translateX(".concat(-e.currentIndex*i,"px)"))),e.transitioning=!1},400)}}},{key:"updatePagination",value:function(){function t(t,e){return 0===t?"active":-1===t?"medium-prev":-2===t?"small-prev":1===t?"medium-next":2===t?"small-next":null}var e=Array.from(this.pagination.children),n=this.totalSlides,i=5,r=(this.currentIndex-this.totalSlides+this.totalSlides)%this.totalSlides;if(n<=i)e.forEach(function(e,i){e.className="grp-dot",e.style.display="inline-block";var o=i-r,s=t(o,n);s&&e.classList.add(s)});else{var o=r-2,s=r+2;o<0&&(s+=-o,o=0),s>n-1&&(o-=s-(n-1),s=n-1,o<0&&(o=0)),e.forEach(function(e,n){if(e.className="grp-dot",e.style.display="none",n>=o&&n<=s){e.style.display="inline-block";var i=n-r,a=t(i,s-o+1);a&&e.classList.add(a)}})}}},{key:"startAutoplay",value:function(){var t=this;this.stopAutoplay(),this.lastSlideTime=performance.now();var e=function e(n){if(t.mode)if(t.isHovered)t.autoRAF=requestAnimationFrame(e);else{var i=n-t.lastSlideTime;i>=t.slideDelay&&(t.lastSlideTime=n,t.goToIndex(t.currentIndex+1)),t.autoRAF=requestAnimationFrame(e)}};this.autoRAF=requestAnimationFrame(e)}},{key:"stopAutoplay",value:function(){cancelAnimationFrame(this.autoRAF),this.autoRAF=null}},{key:"setMode",value:function(t){this.mode=t,clearInterval(this.autoInterval),this.pagination.style.display=this.showPagination?"flex":"none",t?this.startAutoplay():this.stopAutoplay()}},{key:"connectedCallback",value:function(){var t=this;this.slideGap=16,this.visibleSlides=1,this.currentIndex=0,this.autoInterval=null,this.isHovered=!1,this.transitioning=!1,this.isDragging=!1,this.startX=0,this.prevTranslate=0,this.slidesPerView=+this.dataset.slidesPerView||null,this.prevClass=this.getAttribute("prev-class")||"prev",this.nextClass=this.getAttribute("next-class")||"next",this.paginationId=this.getAttribute("pagination-id"),this.showPagination="true"===this.getAttribute("showPagination"),this.mode="true"===this.getAttribute("autoplay"),this.layout=this.getAttribute("layout"),this.slideDelay=1e3*+this.getAttribute("slideDelay")||3e3,this.numOfReviews=+this.getAttribute("numOfReviews"),this.resizeObserver=new ResizeObserver(function(){return t.handleResize()}),this.loop=this.numOfReviews>3;var e=getComputedStyle(document.body),n="rtl"===document.documentElement.getAttribute("dir")||"rtl"===e.direction,i=n?"row-reverse":"row",r="\n      :host {\n        display: block;\n        width: 100%;\n        position: relative;\n      }\n      .grp-wrapper {\n        display: flex;\n        align-items: center;\n      }\n      .grp-track-container {\n        flex-grow: 1;\n        padding: 1px;\n        overflow: hidden;\n      }\n      .grp-track {\n        display: flex;\n        gap: ".concat(this.slideGap,"px;\n        transition: transform 0.4s ease;\n        will-change: transform;\n        align-items: start;\n        padding: 1px;\n        flex-direction: ").concat(i,";\n      }\n      .grp-slide {\n        flex: 0 0 auto;\n        user-select: none;\n        min-width: 0; //to fix the issue of parent width being affected by child content\n      }\n   .grp-pagination {\n        margin-top: 14px;\n        display: none;\n        justify-content: center;\n        align-items: center;\n        height: 30px;\n        gap: 11px;\n         position: relative;\n  width: 250px;\n  margin: 0 auto;\n        \n      }\n      .grp-dot {\n        border-radius: 50%;\n        cursor: pointer; \n        transition: all 0.3s ease;\n        background: #ccc;\n        opacity: 0.8;\n\n          position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n      }\n      .grp-dot:hover {\n        opacity: 1;}\n        .grp-dot.small-prev {\n  width: 3px;\n  height: 3px;\n  left: 80px;\n  opacity: 0.4;\n}\n  .grp-dot.medium-prev {\n  width: 5px;\n  height: 5px;\n  left: 95px;\n  opacity: 0.7;\n}\n\n.grp-dot.active {\n  width: 7px;\n  height: 7px;\n  left: 110px;\n  background: #444;\n  opacity: 1;\n}\n\n.grp-dot.medium-next {\n  width: 5px;\n  height: 5px;\n  left: 125px;\n  opacity: 0.7;\n}\n\n.grp-dot.small-next {\n  width: 3px;\n  height: 3px;\n  left: 140px;\n  opacity: 0.4;\n}\n    "),o=document.createElement("style");o.textContent=r,this.wrapper=document.createElement("div"),this.wrapper.className="grp-wrapper",this.track=document.createElement("div"),this.track.className="grp-track";var s=Array.from(this.children);this.originalSlides=s.map(function(t){var e=t.cloneNode(!0);return e.classList.add("grp-slide"),e}),s.forEach(function(t){return t.remove()}),this.totalSlides=this.originalSlides.length;var a=1;s.length>3&&(a=s.length<=7?5:3);for(var l=0;l<a;l++)this.originalSlides.forEach(function(e){t.track.appendChild(e.cloneNode(!0))});this.trackContainer=document.createElement("div"),this.trackContainer.className="grp-track-container",this.trackContainer.appendChild(this.track),this.wrapper.appendChild(this.trackContainer),this.append(o,this.wrapper),this.paginationElements=document.querySelectorAll(".".concat(this.paginationId)),this.pagination=document.createElement("div"),this.pagination.className="grp-pagination";for(var c=function(e){var n=document.createElement("div");n.className="grp-dot",t.loop?n.addEventListener("click",function(){return t.goToIndex(t.totalSlides+e)}):n.addEventListener("click",function(){return t.goToIndex(e)}),t.pagination.appendChild(n)},u=0;u<this.totalSlides;u++)c(u);this.paginationElements.forEach(function(e){null!=e&&e.children[0]?(null==e||e.removeChild(null==e?void 0:e.children[0]),null==e||e.appendChild(t.pagination)):null==e||e.appendChild(t.pagination)}),this.wrapper.addEventListener("mouseenter",function(){return t.isHovered=!0}),this.wrapper.addEventListener("mouseleave",function(){return t.isHovered=!1}),this.addDragEvents(),this.attachExternalArrowListeners(),requestAnimationFrame(function(){t.visibleSlides=t.getResponsiveSlideCount(),t.updateSlideWidths(),t.goToIndex(t.totalSlides,!0),t.setMode(t.mode)}),this.resizeObserver.observe(this),window.addEventListener("resize",this.handleResize),"popupfloating"!=this.layout&&"popup-slider"!=this.layout||(this.closeButtons=document.querySelectorAll(".grp-close-button-".concat(this.layout)),this.sliderWrap=document.getElementsByClassName(this.layout),this.closeButtons.forEach(function(e){return e.addEventListener("click",function(e){e.stopPropagation(),t.sliderWrap[0].style.visibility="hidden"})}))}},{key:"disconnectedCallback",value:function(){this.resizeObserver.disconnect(),window.removeEventListener("resize",this.handleResize)}}]),e}(_wrapNativeSuper(HTMLElement));customElements.define("manual-slider",InfiniteSlider);