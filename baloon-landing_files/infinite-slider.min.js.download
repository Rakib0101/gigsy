"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_toPropertyKey(r.key),r)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!==_typeof(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var i,r=_getPrototypeOf(t);if(e){var n=_getPrototypeOf(this).constructor;i=Reflect.construct(r,arguments,n)}else i=r.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _wrapNativeSuper(t){var e="function"==typeof Map?new Map:void 0;return _wrapNativeSuper=function(t){function i(){return _construct(t,arguments,_getPrototypeOf(this).constructor)}if(null===t||!_isNativeFunction(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,i)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(i,t)},_wrapNativeSuper(t)}function _construct(t,e,i){return _construct=_isNativeReflectConstruct()?Reflect.construct.bind():function(t,e,i){var r=[null];r.push.apply(r,e);var n=Function.bind.apply(t,r),o=new n;return i&&_setPrototypeOf(o,i.prototype),o},_construct.apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function _isNativeFunction(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}function _setPrototypeOf(t,e){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_setPrototypeOf(t,e)}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}var InfiniteAutoscrollSlider=function(t){function e(){var t;return _classCallCheck(this,e),t=i.call(this),t.handleResize=t.handleResize.bind(_assertThisInitialized(t)),t}_inherits(e,t);var i=_createSuper(e);return _createClass(e,[{key:"handleResize",value:function(){var t=this.getResponsiveSlideCount();t!==this.visibleSlides&&(this.visibleSlides=t,this.updateSlideWidths()),this.recalculateLayout()}},{key:"getResponsiveSlideCount",value:function(){var t=this.offsetWidth||window.innerWidth;return 1===this.slidesPerView?1:2===this.slidesPerView?t<500?1:2:t<500?1:t<790?2:t<1022?3:4}},{key:"updateSlideWidths",value:function(){var t="calc((100% - ".concat(this.slideGap*(this.visibleSlides-1),"px) / ").concat(this.visibleSlides,")");Array.from(this.track.children).forEach(function(e){e.style.flex="0 0 ".concat(t)})}},{key:"recalculateLayout",value:function(){var t,e=(null===(t=this.track.children[0])||void 0===t?void 0:t.offsetWidth)+this.slideGap;if(e&&0!==this.totalSlides){var i=this.totalSlides*e,r=this.scrollX/(this.oldSlideWidth||e);this.scrollX=r*e;var n=(this.scrollX-i)%(this.totalSlides*e);this.scrollX=i+(n<0?n+this.totalSlides*e:n),this.track.style.transform="translateX(".concat(-this.scrollX,"px)"),this.oldSlideWidth=e}}},{key:"setSpeed",value:function(t){"number"==typeof t&&t>=0&&(this.scrollSpeed=t)}},{key:"startAutoScroll",value:function(){var t=this,e=function e(){var i;if(t.isHovered||t.isDragging)return requestAnimationFrame(e);var r=(null===(i=t.track.children[0])||void 0===i?void 0:i.offsetWidth)+t.slideGap;if(r){var n=t.track.children.length*r,o=t.totalSlides*r;if(t.scrollX+=t.slideSpeed,t.scrollX>=n-t.visibleSlides*r){var s=(t.scrollX-o)%(t.totalSlides*r);t.scrollX=o+(s<0?s+t.totalSlides*r:s)}t.track.style.transform="translateX(".concat(-t.scrollX,"px)"),requestAnimationFrame(e)}};requestAnimationFrame(e)}},{key:"enableDrag",value:function(){var t=this,e=0,i=0,r=function(r){var n;t.isDragging=!0,e=null!==(n=r.pageX)&&void 0!==n?n:r.touches[0].pageX,i=t.scrollX,t.track.classList.add("dragging")},n=function(r){var n;if(t.isDragging){var o=null!==(n=r.pageX)&&void 0!==n?n:r.touches[0].pageX,s=o-e;t.scrollX=i-s,t.track.style.transform="translateX(".concat(-t.scrollX,"px)")}},o=function(){if(t.isDragging){t.isDragging=!1,t.track.classList.remove("dragging");var e=t.track.children[0];if(e){var i=e.offsetWidth+t.slideGap,r=t.totalSlides*i,n=(t.scrollX-r)%(t.totalSlides*i);t.scrollX=r+(n<0?n+t.totalSlides*i:n),t.track.style.transform="translateX(".concat(-t.scrollX,"px)")}}};this.track.addEventListener("mousedown",r),this.track.addEventListener("touchstart",r,{passive:!0}),window.addEventListener("mousemove",n),window.addEventListener("touchmove",n,{passive:!1}),window.addEventListener("mouseup",o),window.addEventListener("touchend",o)}},{key:"connectedCallback",value:function(){var t=this;this.slideGap=16,this.scrollX=0,this.totalSlides=0,this.visibleSlides=1,this.oldSlideWidth=0,this.isHovered=!1,this.isDragging=!1,this.scrollSpeed=5,this.slidesPerView=+this.dataset.slidesPerView||null,this.visibleSlides=this.getResponsiveSlideCount(),this.slideSpeed=+this.getAttribute("slideSpeed"),this.resizeObserver=new ResizeObserver(function(){return t.handleResize()});var e=getComputedStyle(document.body),i="rtl"===document.documentElement.getAttribute("dir")||"rtl"===e.direction,r=i?"row-reverse":"row",n="\n      :host {\n        display: block;\n        width: 100%;\n        position: relative;\n      }\n      .grp-track-container {\n        overflow: hidden;\n        width: 100%;\n        padding: 1px;\n      }\n      .grp-track {\n        display: flex;\n        gap: ".concat(this.slideGap,"px;\n        will-change: transform;\n        align-items: start;\n        transition: none;\n        padding: 1px;\n        flex-direction: ").concat(r,";\n      }\n      .grp-slide {\n        flex: 0 0 calc((100% - ").concat(this.slideGap*(this.visibleSlides-1),"px) / ").concat(this.visibleSlides,");\n        border-radius: 8px;\n        user-select: none;\n        min-width: 0; //to fix the issue of parent width being affected by child content\n      }\n    "),o=document.createElement("style");o.textContent=n,this.track=document.createElement("div"),this.track.className="grp-track";var s=Array.from(this.children);this.originalSlides=s.map(function(t){var e=t.cloneNode(!0);return e.classList.add("grp-slide"),e}),s.forEach(function(t){return t.remove()}),this.totalSlides=this.originalSlides.length,this.trackContainer=document.createElement("div"),this.trackContainer.className="grp-track-container",this.trackContainer.appendChild(this.track),this.append(o,this.trackContainer);for(var a=s.length<=7?5:3,l=0;l<a;l++)this.originalSlides.forEach(function(e){var i=e.cloneNode(!0);i.classList.add("grp-slide"),t.track.appendChild(i)});requestAnimationFrame(function(){t.updateSlideWidths(),t.recalculateLayout(),t.startAutoScroll()}),this.addEventListener("mouseenter",function(){return t.isHovered=!0}),this.addEventListener("mouseleave",function(){return t.isHovered=!1}),this.enableDrag(),this.resizeObserver.observe(this),window.addEventListener("resize",this.handleResize)}},{key:"disconnectedCallback",value:function(){this.resizeObserver.disconnect(),window.removeEventListener("resize",this.handleResize)}}]),e}(_wrapNativeSuper(HTMLElement));customElements.define("infinite-slider",InfiniteAutoscrollSlider);