class VariantSelects extends HTMLElement{constructor(){super(),backgroundCheck("[data-adaptive-text]"),this.sectionId=this.dataset.section,this.dataset.block&&(this.sectionId=`${this.dataset.section}${this.dataset.block}`),this.productGallery=document.querySelector(`.product-single__gallery-${this.sectionId}`),this.initDropdownSize(),this.initColorChips(),this.initVariant(),this.addEventListener("change",this.onVariantChange)}initDropdownSize(){const dropdownList=this.querySelectorAll(".product-form__input--dropdown");let arrayList=[];for(let i=0;i<dropdownList.length;i++){const eachList=dropdownList[i].offsetWidth;arrayList.push(eachList);const MaxWidth=Math.max.apply(null,arrayList);MaxWidth>0&&(dropdownList[i].style.width=MaxWidth+"px",dropdownList[i].querySelector(".select").style.width=MaxWidth+"px")}}initVariant(){this.updateOptions(),this.updateMasterId(),this.updateVariantInput(),this.updateSoldOutVariants(),this.updateSoldOutSibling(),this.updateAddButton(),this.updatePickupAvailability()}onVariantChange(){this.updateOptions(),this.updateMasterId(),this.updateSoldOutVariants(),this.updateSoldOutSibling(),this.updateAddButton(),this.updatePickupAvailability(),this.removeErrorMessage(),this.currentVariant?(this.updateMedia(),this.updateURL(),this.updateVariantInput(),this.renderProductInfo(),this.updateLimitQuantity()):this.setUnavailable()}updateOptions(){let fieldOptions=Array.from(this.querySelectorAll(".product-meta-option"));fieldOptions=fieldOptions.map(fieldOption=>{const isFieldsetRadio=fieldOption.dataset.selectorButton,isFieldsetCheckbox=fieldOption.dataset.selectorCheckbox;if(isFieldsetRadio){const inputChecked=Array.from(fieldOption.querySelectorAll("input")).find(radio=>radio.checked),selectedColorStatus=fieldOption.querySelector(".selected-status--color");return inputChecked?(selectedColorStatus&&(selectedColorStatus.textContent=inputChecked.value),{name:inputChecked.dataset.name,value:inputChecked.value}):{name:fieldOption.querySelector("input").dataset.name,value:null}}else if(isFieldsetCheckbox){const inputChecked=fieldOption.querySelector("input"),checkBoxValue=inputChecked.checked?"Yes":"No";return{name:inputChecked.dataset.name,value:checkBoxValue}}else{const selectedIndex=fieldOption.selectedIndex,nameRegex=fieldOption.dataset.name.match(/\[(.*?)\]/);return selectedIndex?{name:nameRegex[1],value:fieldOption.value}:{name:nameRegex[1],value:null}}}),this.options=fieldOptions}updateMasterId(){if(this.getVariantData(),!this.options.every(option=>option.value!=null)){this.currentVariant=null;return}this.currentVariant=this.variantData.find(variant=>!variant.options.map((option,index)=>this.options[index].value?this.options[index].value===option:!0).includes(!1))}initColorChips(){let fieldsetsColorRadios=Array.from(this.querySelectorAll(".product-meta-selector--color label"))||[];fieldsetsColorRadios.length&&fieldsetsColorRadios.forEach(field=>{const backgroundColor=field.querySelector(".selector-color-square").style.backgroundColor;!field.querySelector(".selector-color-square").style.backgroundImage&&!backgroundColor&&field.classList.add("single-option--no-color")})}updateMedia(){if(!this.currentVariant||!this.currentVariant.featured_media)return;const mediaGallery=document.getElementById(`MediaGallery-${this.sectionId}`);mediaGallery&&mediaGallery.setActiveMedia(`${this.sectionId}-${this.currentVariant.featured_media.id}`,this.productData.options,this.currentVariant)}updateURL(){!this.currentVariant||this.dataset.updateUrl==="false"||window.history.replaceState({},"",`${this.dataset.url}?variant=${this.currentVariant.id}`)}updateVariantInput(){if(!this.currentVariant)return;document.querySelectorAll(`#product-form-${this.sectionId}, #product-form-installment`).forEach(productForm=>{const input=productForm.querySelector('input[name="id"]');input.value=this.currentVariant.id,input.dispatchEvent(new Event("change",{bubbles:!0}))})}updatePickupAvailability(){const pickUpAvailability=document.querySelector(`pickup-availability.pickup-availability--${this.sectionId}`);pickUpAvailability&&(this.currentVariant&&this.currentVariant.available?pickUpAvailability.fetchAvailability&&pickUpAvailability.fetchAvailability(this.currentVariant.id):(pickUpAvailability.removeAttribute("available"),pickUpAvailability.innerHTML=""))}removeErrorMessage(){const section=this.closest("section");if(!section)return;const productForm=section.querySelector("product-form");productForm&&productForm.handleErrorMessage()}renderProductInfo(){let sectionId=this.dataset.section,productUrl=this.dataset.url;if(this.dataset.originalSection){const productElement=document.querySelector('section[id^="MainProduct-"]'),[path,searchParams]=productUrl.split("?");productElement&&(sectionId=productElement.dataset.section),productUrl=path}fetch(`${productUrl}?variant=${this.currentVariant.id}&section_id=${sectionId}`).then(response=>response.text()).then(responseText=>{const priceId=`price-${this.sectionId}`,skuId=`sku-${this.sectionId}`,html=new DOMParser().parseFromString(responseText,"text/html"),destinationPrice=document.getElementById(priceId),destinationSku=document.getElementById(skuId);let sourcePrice=html.getElementById(priceId),sourceSku=html.getElementById(skuId);sourcePrice||(sourcePrice=html.getElementById(`price-${sectionId}`)),sourceSku||(sourceSku=html.getElementById(`sku-${sectionId}`)),sourcePrice&&destinationPrice&&(destinationPrice.innerHTML=sourcePrice.innerHTML),sourceSku&&destinationSku&&(destinationSku.innerHTML=sourceSku.innerHTML);const price=document.getElementById(`price-${this.sectionId}`);price&&price.classList.remove("visibility-hidden"),this.updateAddButton()})}updateLimitQuantity(){const quantityInput=document.getElementById(`QuantityInput-${this.sectionId}`);quantityInput&&quantityInput.updateLimitQuantity(this.currentVariant)}getVariantsFromOptions(variantsArray,optionName){const availableVariants=variantsArray.filter(variant=>!variant.options.map((variantOption,optionIndex)=>{const variantName=this.productData.options[optionIndex].toLowerCase();return!!(variantName===optionName||this.options.find(opt=>variantName===opt.name.toLowerCase()&&(!opt.value||opt.value===variantOption)))}).includes(!1)),soldOutVariants=availableVariants.filter(availableVariant=>!availableVariant.available);return{availableVariants,soldOutVariants}}camelize(str){const regex=/[A-Z\xC0-\xD6\xD8-\xDE]?[a-z\xDF-\xF6\xF8-\xFF]+|[A-Z\xC0-\xD6\xD8-\xDE]+(?![a-z\xDF-\xF6\xF8-\xFF])|\d+/g,inputArray=str.match(regex);let result="";if(inputArray)for(let i=0,len=inputArray.length;i<len;i++){let currentStr=inputArray[i],tempStr=currentStr.substr(0,1).toUpperCase()+currentStr.substr(1);result+=tempStr}else result=str;return result}updateSoldOutVariants(){let variantsWithOptions=this.variantData,unavailableVariants=[];const productOptions=this.productData.options;variantsWithOptions=variantsWithOptions.filter(variant=>!variant.options.map((option,index)=>{const selectedOptionName=productOptions[index].toLowerCase();return!!this.options.find(opt=>selectedOptionName===opt.name&&(!opt.value||opt.value===option))}).includes(!1)),unavailableVariants=variantsWithOptions.filter(variant=>!variant.available);for(let index=0;index<productOptions.length;index++){const optionName=productOptions[index].toLowerCase(),camelizeOptionName=this.camelize(optionName),fieldOption=this.querySelector(`.product-meta-option--${camelizeOptionName}`);if(fieldOption)if(fieldOption.dataset.selectorButton){const inputOptions=Array.from(fieldOption.querySelectorAll("input"));for(let i=0;i<inputOptions.length;i++){const inputOption=inputOptions[i],value=inputOption.value;if(!value)continue;const variantsFromInput=this.variantData.filter(v=>v.options.find(opt=>opt===value)),unavailableFromInput=variantsFromInput.filter(v=>!v.available),unavailableOptions=unavailableVariants.filter(v=>v.options.find(opt=>opt===value));if(inputOption.dataset.disabled=!1,variantsFromInput.length===unavailableFromInput.length)inputOption.dataset.disabled=!0;else if(unavailableOptions.length){const availableOptions=variantsWithOptions.filter(v=>v.options.find(opt=>opt===value));unavailableOptions.length===availableOptions.length&&(inputOption.dataset.disabled=!0)}else if(unavailableFromInput.length){const variantsFromOptions=this.getVariantsFromOptions(variantsFromInput,optionName);variantsFromOptions.soldOutVariants.length&&variantsFromOptions.soldOutVariants.length===variantsFromOptions.availableVariants.length&&(inputOption.dataset.disabled=!0)}}}else{const selectOptions=Array.from(fieldOption.querySelectorAll("option"));for(let i=0;i<selectOptions.length;i++){const selectOption=selectOptions[i],value=selectOption.value;if(!value)continue;const variantsFromInput=this.variantData.filter(v=>v.options.find(opt=>opt===value)),unavailableFromInput=variantsFromInput.filter(v=>!v.available),unavailableOptions=unavailableVariants.filter(v=>v.options.find(opt=>opt===value));if(selectOption.dataset.disabled=!1,variantsFromInput.length===unavailableFromInput.length)selectOption.dataset.disabled=!0;else if(unavailableOptions.length){const availableOptions=variantsWithOptions.filter(v=>v.options.find(opt=>opt===value));unavailableOptions.length===availableOptions.length&&(selectOption.dataset.disabled=!0)}else if(unavailableFromInput.length){const variantsFromOptions=this.getVariantsFromOptions(variantsFromInput,optionName);variantsFromOptions.soldOutVariants.length&&variantsFromOptions.soldOutVariants.length===variantsFromOptions.availableVariants.length&&(selectOption.dataset.disabled=!0)}}}}}updateSoldOutSibling(){const variant=this.currentVariant,productSiblings=document.getElementById(`product-siblings-${this.sectionId}`);if(!productSiblings)return;const currentSibling=productSiblings.querySelector(".single-option-selector__option-wrap--checked");if(!currentSibling)return;const currentOptionSelector=currentSibling.querySelector(".single-option-selector__option"),currentSiblingOption=currentSibling.querySelector(".product__siblings__option");if(!variant){currentOptionSelector.classList.remove("sold-out"),currentSiblingOption.classList.remove("sold-out");return}variant.available?(currentOptionSelector.classList.remove("sold-out"),currentSiblingOption.classList.remove("sold-out")):(currentOptionSelector.classList.add("sold-out"),currentSiblingOption.classList.add("sold-out"))}updateAddButton(){const variant=this.currentVariant,productForm=document.getElementById(`product-form-${this.sectionId}`);if(!productForm)return;const addButton=productForm.querySelector("[data-add-to-cart]"),addButtonText=productForm.querySelector("[data-add-to-cart-text]");if(!addButton)return;const variantClassSoldOut="product-form--variant-sold-out",formParentElement=productForm.closest(".product-form__buy-buttons"),productMetaPrice=formParentElement?formParentElement.querySelector("[data-product-meta-price]"):null,leftQuantityElm=productMetaPrice?productMetaPrice.querySelector("[data-left-quantity]"):null;if(productMetaPrice&&productMetaPrice.classList.add("meta-price--hidden"),!variant){addButton.setAttribute("aria-disabled",!0),addButton.setAttribute("aria-label",window.variantStrings.unavailable),addButton.setAttribute("disabled",!0),addButtonText.textContent=window.variantStrings.unavailable,productForm.classList.add(variantClassSoldOut);return}if(variant.available){if(addButton.removeAttribute("aria-disabled"),addButton.removeAttribute("disabled"),addButton.setAttribute("aria-label",window.variantStrings.addToCart),addButtonText.textContent=window.variantStrings.addToCart,productForm.classList.remove(variantClassSoldOut),productMetaPrice&&productMetaPrice.classList.remove("meta-price--hidden"),leftQuantityElm){const quantity=variant.inventory_quantity,quantityThreshold=parseInt(leftQuantityElm.dataset.quantityThreshold);if(quantity>0&&quantity<=quantityThreshold){const quantityLeft=window.variantStrings.lowStock.replace("[quantity]",quantity);leftQuantityElm.innerHTML=quantityLeft,leftQuantityElm.parentElement.classList.add("product-form__selected-status--red")}else leftQuantityElm.innerHTML=window.variantStrings.inStock,leftQuantityElm.parentElement.classList.remove("product-form__selected-status--red")}}else addButton.setAttribute("disabled",!0),addButtonText.textContent=window.variantStrings.soldOut,productForm.classList.add(variantClassSoldOut),leftQuantityElm&&(leftQuantityElm.innerHTML="")}setUnavailable(){const addButton=document.getElementById(`product-form-${this.sectionId}`).querySelector('[name="add"]'),price=document.getElementById(`price-${this.sectionId}`);addButton&&(addButton.textContent=window.variantStrings.unavailable,price&&price.classList.add("visibility-hidden"))}getVariantData(){return this.productData=this.productData||JSON.parse(this.querySelector('[type="application/json"]').textContent),this.variantData=this.variantData||this.productData.variants,this.variantData.forEach(variant=>{variant.in_stock=variant.inventory_quantity>0,variant.preorder_item=variant.inventory_quantity<=0&&variant.available===!0,variant.sold_out=variant.inventory_quantity<=0&&variant.available===!1}),this.variantData}}customElements.define("variant-selects",VariantSelects);class VariantRadios extends VariantSelects{constructor(){super()}updateOptions(){let fieldsets=Array.from(this.querySelectorAll("fieldset"));fieldsets=fieldsets.map(fieldset=>{const isFieldsetCheckbox=fieldset.dataset.selectorCheckbox,inputChecked=isFieldsetCheckbox?fieldset.querySelector("input"):Array.from(fieldset.querySelectorAll("input")).find(radio=>radio.checked),selectedColorStatus=fieldset.querySelector(".selected-status--color");if(inputChecked&&!isFieldsetCheckbox)return selectedColorStatus&&(selectedColorStatus.textContent=inputChecked.value),{name:inputChecked.dataset.name,value:inputChecked.value};if(isFieldsetCheckbox){const checkBoxValue=inputChecked.checked?"Yes":"No";return{name:inputChecked.dataset.name,value:checkBoxValue}}return{name:fieldset.querySelector("input").dataset.name,value:null}}),this.options=fieldsets}}customElements.define("variant-radios",VariantRadios);class ProductCheckboxGroup extends HTMLElement{constructor(){super();const productMetagrid=this.closest(".product__meta-grid");this.productForm=productMetagrid.querySelector("product-form"),this.dynamicCheckoutWrap=productMetagrid.querySelector(".product-form__dynamic-buttons");const errorMessage=this.parentElement.querySelector(".input-error-message"),inputElms=this.querySelectorAll("input[type=checkbox]"),mainInputELm=this.querySelector("input[type=hidden]"),minLimit=this.dataset.min?parseInt(this.dataset.min):null,maxLimit=this.dataset.max?parseInt(this.dataset.max):null;inputElms.forEach(inputElm=>{inputElm.addEventListener("change",evt=>{const checkedInputs=this.querySelectorAll("input[type=checkbox]:checked");let checkedString="";if(minLimit&&checkedInputs.length>=minLimit){const inputError=this.querySelector("input.input--error");errorMessage&&errorMessage.classList.add("hide"),inputError&&inputError.classList.remove("input--error"),productMetagrid.querySelectorAll(".input--error").length===0&&this.productForm.handleErrorMessage();const requiredInputs=Array.from(productMetagrid.querySelectorAll("input[aria-required]:not(.checkbox-group__input)"));let checker=arr=>arr.every(v=>v===!0);const checkValues=requiredInputs.map(requiredInput=>!(requiredInput.value==""||requiredInput.type=="checkbox"&&!requiredInput.checked));checker(checkValues)?this.dynamicCheckoutWrap.classList.remove("product-form__dynamic-buttons--disable"):this.dynamicCheckoutWrap.classList.add("product-form__dynamic-buttons--disable")}else minLimit&&checkedInputs.length<minLimit&&this.dynamicCheckoutWrap.classList.add("product-form__dynamic-buttons--disable");if(maxLimit){const disableInput=checkedInputs.length>=maxLimit;this.querySelectorAll("input[type=checkbox]:not(:checked)").forEach(uncheckedInput=>{uncheckedInput.disabled=disableInput})}checkedInputs.forEach(checkedInput=>{checkedString.length>0&&(checkedString+=","),checkedString+=checkedInput.value}),mainInputELm.value=checkedString})})}}customElements.define("product-checkbox-group",ProductCheckboxGroup);class DateField extends HTMLElement{constructor(){if(super(),!this.dataset.days)return;const daysFromCurrentDate=parseInt(this.dataset.days),currentDay=new Date,forwardDays=currentDay.getDate()+daysFromCurrentDate;currentDay.setDate(forwardDays);const inputDate=this.querySelector('input[type="date"]'),monthValue=(currentDay.getMonth()+1).toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),dateValue=currentDay.getDate().toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),newDateAllowed=`${currentDay.getFullYear()}-${monthValue}-${dateValue}`;inputDate.value=newDateAllowed,inputDate.min=newDateAllowed}}customElements.define("date-field",DateField);class ProductCustomOption extends HTMLElement{constructor(){super(),this.optionName=this.dataset.optionName,this.optionType=this.dataset.type,this.iconStyle=this.dataset.iconStyle;const requiredInput=this.querySelector("[aria-required]");if(requiredInput&&this.validateError(requiredInput),this.optionType==="swatches"&&this.setColorSwatch(),this.optionType==="color-picker"&&this.setColorPicker(),this.optionType==="image-upload"&&this.setDragAndDrop(),this.optionType==="single-line"||this.optionType==="multi-line"){const fieldWrapper=this.querySelector(".field-wrapper__input");fieldWrapper.getAttribute("maxlength")&&this.maxLenghtRemaining(fieldWrapper)}}setColorSwatch(){[...this.querySelectorAll(`input[name="properties[${this.optionName}]"]`)].forEach(optionInput=>{optionInput.addEventListener("change",evt=>{const currentInput=evt.currentTarget,selectedColorStatus=this.querySelector(".selected-status--color");currentInput.checked&&selectedColorStatus&&(selectedColorStatus.textContent=currentInput.value)})})}setColorPicker(){this.querySelector('input[type="color"]').addEventListener("change",evt=>{const currentInput=evt.currentTarget,selectedColorStatus=this.querySelector(".selected-status--color"),customField=this.querySelector(".field-color__custom");selectedColorStatus&&(selectedColorStatus.textContent=currentInput.value),customField&&(customField.style.backgroundColor=currentInput.value)})}maxLenghtRemaining(fieldWrapper){const maxlengthCountElm=this.querySelector(".requirement-form span");if(maxlengthCountElm){const maxLength=fieldWrapper.maxLength;maxlengthCountElm.textContent=maxLength-fieldWrapper.value.length,fieldWrapper.addEventListener("keyup",()=>{const characterCount=maxLength-fieldWrapper.value.length;maxlengthCountElm.textContent=characterCount})}}validateError(requiredInput){const productMetagrid=requiredInput.closest(".product__meta-grid");let eventName="keyup";(requiredInput.tagName==="SELECT"||requiredInput.type==="checkbox"||requiredInput.type==="file")&&(eventName="change"),this.productForm=productMetagrid.querySelector("product-form"),this.dynamicCheckoutWrap=productMetagrid.querySelector(".product-form__dynamic-buttons"),requiredInput.addEventListener(eventName,event=>{let currentInput=requiredInput;if((currentInput.value==""||currentInput.type=="checkbox"&&!currentInput.checked)&&this.dynamicCheckoutWrap.classList.add("product-form__dynamic-buttons--disable"),currentInput.classList.contains("input--error")){if(currentInput.classList.contains("checkbox-group__input")||currentInput.type=="checkbox"&&!currentInput.checked)return;removeErrorStyle(currentInput),productMetagrid.querySelectorAll(".input--error").length===0&&(this.dynamicCheckoutWrap.classList.remove("product-form__dynamic-buttons--disable"),this.productForm.handleErrorMessage())}})}formatFileType(file){const type=file.type,splitType=type.split("/"),subtype=splitType[1];let formattedType=subtype,handleSubtype=subtype.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/-$/,"").replace(/^-/,"");const applicationType={pdf:subtype.toUpperCase(),"vnd-ms-excel":"Excel","vnd-openxmlformats-officedocument-spreadsheetml-sheet":"Excel","vnd-ms-powerpoint":"PowerPoint","vnd-openxmlformats-officedocument-presentationml-presentation":"PowerPoint","x-msvideo":"AVI",html:"HTML",msword:"Word","vnd-openxmlformats-officedocument-wordprocessingml-document":"Word",csv:"CSV",mpeg:"MP3 Audio",webm:"WEBM Audio","mp4-video":"MP4 Video","mpeg-video":"MPEG Video","webm-video":"WEBM Video","vnd-rar":"RAR archive",rtf:"RTF",plain:"Text",wav:"WAV","vnd-adobe-photoshop":"Adobe Photoshop",postscript:"Adobe Illustrator"};if(type.startsWith("image/"))applicationType[handleSubtype]?formattedType=applicationType[handleSubtype]:(formattedType=splitType[1].toUpperCase(),formattedType=`${formattedType} Image`);else if(type.startsWith("video/")){const handleVideoSubtype=`${handleSubtype}-video`;applicationType[handleVideoSubtype]&&(formattedType=applicationType[handleVideoSubtype])}else applicationType[handleSubtype]&&(formattedType=applicationType[handleSubtype]);return formattedType}calculateSize(file){let numberOfBytes=file.size;if(numberOfBytes===0)return 0;const units=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],exponent=Math.min(Math.floor(Math.log(numberOfBytes)/Math.log(1024)),units.length-1),approx=numberOfBytes/1024**exponent;return exponent===0?`${numberOfBytes} bytes`:`${approx.toFixed(2)} ${units[exponent]}`}getIconName(file){const fileName=file.name,type=file.type;let iconName="fa-file";return/\.(xls?x|csv)$/i.test(fileName)&&(iconName="fa-file-excel"),/\.(doc?x)$/i.test(fileName)&&(iconName="fa-file-word"),/\.(ppt?x)$/i.test(fileName)&&(iconName="fa-file-powerpoint"),/\.(txt)$/i.test(fileName)&&(iconName="fa-file-text"),/\.(pdf)$/i.test(fileName)&&(iconName="fa-file-pdf"),type.startsWith("video/")&&(iconName="fa-file-video"),type.startsWith("audio/")&&(iconName="fa-file-audio"),iconName}preview(dropZoneWrapElm,file){const reader=new FileReader;reader.addEventListener("load",()=>{const inputElm=dropZoneWrapElm.querySelector(".drop-zone__input");let thumbnailElement=dropZoneWrapElm.querySelector(".drop-zone__thumb"),preview=dropZoneWrapElm.querySelector(".dd-thumbnail"),fileInfo=dropZoneWrapElm.querySelector(".dd-file-info");if(!thumbnailElement){thumbnailElement=document.createElement("div"),thumbnailElement.classList.add("drop-zone__thumb"),preview=document.createElement("div"),fileInfo=document.createElement("div"),fileInfo.setAttribute("class","dd-file-info"),preview.setAttribute("class","dd-thumbnail");const fileInfoText=document.createElement("div");fileInfoText.setAttribute("class","dd-file-info__text");const spanTitle=document.createElement("span"),spanFileType2=document.createElement("span");spanTitle.setAttribute("class","dd-file-info__title"),spanFileType2.setAttribute("class","dd-file-info__type");const btnRemove=document.createElement("button"),btnIcon=document.createElement("i");btnRemove.setAttribute("class","btn--link"),btnIcon.setAttribute("class",`icon ${this.iconStyle} fa-trash-can`),btnRemove.appendChild(btnIcon),btnRemove.addEventListener("click",evt=>{evt.preventDefault(),inputElm.value="",dropZoneWrapElm.classList.remove("drop-zone-wrap--inactive"),thumbnailElement.parentNode.removeChild(thumbnailElement)},!1),thumbnailElement.appendChild(preview),fileInfoText.appendChild(spanTitle),fileInfoText.appendChild(spanFileType2),fileInfo.appendChild(fileInfoText),fileInfo.appendChild(btnRemove),thumbnailElement.appendChild(fileInfo),dropZoneWrapElm.classList.add("drop-zone-wrap--inactive"),dropZoneWrapElm.appendChild(thumbnailElement)}const spanFileName=fileInfo.querySelector(".dd-file-info__title"),fileName=file.name.substring(0,file.name.lastIndexOf("."))||file.name;spanFileName.textContent=fileName;const spanFileType=fileInfo.querySelector(".dd-file-info__type");if(spanFileType.textContent=`${this.formatFileType(file)} \u2022 ${this.calculateSize(file)}`,preview.innerHTML="",preview.removeAttribute("style"),/\.(jpe?g|png|gif|webp)$/i.test(file.name))preview.setAttribute("style",`background-image:url("${reader.result}"); width: 40px;`);else{const icon=document.createElement("i");icon.setAttribute("class",`icon ${this.iconStyle} ${this.getIconName(file)}`),preview.appendChild(icon)}thumbnailElement.setAttribute("data-ts-file",file.name)},!1),reader.readAsDataURL(file)}setDragAndDrop(){const inputElement=this.querySelector(".drop-zone__input"),dropZoneWrapElm=inputElement.closest(".drop-zone-wrap"),dropZoneElement=inputElement.closest(".drop-zone");dropZoneElement.addEventListener("click",e=>{inputElement.click()}),inputElement.addEventListener("change",e=>{if(inputElement.files.length){const dropZone=inputElement.closest(".drop-zone-wrap"),errorMessage=dropZone.querySelector(".input-error-message"),file=inputElement.files[0],filesize=(file.size/1024/1024).toFixed(4);if(dropZone.classList.remove("drop-zone-wrap--error"),errorMessage&&errorMessage.classList.add("hide"),filesize>5){inputElement.value="",dropZone.classList.add("drop-zone-wrap--error"),errorMessage&&(errorMessage.classList.remove("hide"),errorMessage.querySelector("span:not(.visually-hidden)").textContent=window.variantStrings.fileSizeError);return}this.preview(dropZoneWrapElm,file)}}),dropZoneElement.addEventListener("dragover",e=>{e.preventDefault(),dropZoneElement.classList.add("drop-zone--over")}),["dragleave","dragend"].forEach(type=>{dropZoneElement.addEventListener(type,e=>{dropZoneElement.classList.remove("drop-zone--over")})}),dropZoneElement.addEventListener("drop",e=>{e.preventDefault(),e.dataTransfer.files.length&&(inputElement.files=e.dataTransfer.files,this.preview(dropZoneWrapElm,e.dataTransfer.files[0])),dropZoneElement.classList.remove("drop-zone--over")})}}customElements.define("product-custom-option",ProductCustomOption);
//# sourceMappingURL=/cdn/shop/t/33/assets/variants.js.map?v=18765400868810450911749835974
